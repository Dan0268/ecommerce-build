(this["webpackJsonpreact-routing"]=this["webpackJsonpreact-routing"]||[]).push([[0],{23:function(t,e,n){t.exports={ProductCard:"ProductCard_ProductCard__3laxY",Variants:"ProductCard_Variants__2HtO2",Variant:"ProductCard_Variant__1p-oY"}},24:function(t,e,n){t.exports={CartCard:"CartCard_CartCard__2_-bn",Variants:"CartCard_Variants__2NbVp",Variant:"CartCard_Variant__3GNr_"}},33:function(t,e,n){t.exports={Home:"Home_Home__3J1zE"}},34:function(t,e,n){t.exports={Product:"Product_Product__AspPs",Variants:"Product_Variants__3aRAA",Variant:"Product_Variant__1QodX"}},35:function(t,e,n){t.exports={Cart:"Cart_Cart__W56FN"}},40:function(t,e,n){},41:function(t,e,n){},55:function(t,e,n){"use strict";n.r(e);var r=n(2),a=n.n(r),c=n(31),i=n.n(c),s=(n(40),n(41),n(5)),o=n.n(s),u=n(8),d=n(9),p=n(20),b=n(29);b.a.initializeApp({apiKey:"AIzaSyAJkhpumDXBPGzVVN1YrZMEZK8Kl_DCGBQ",authDomain:"react-ecommerce-1e532.firebaseapp.com",projectId:"react-ecommerce-1e532",storageBucket:"react-ecommerce-1e532.appspot.com",messagingSenderId:"696381836280",appId:"1:696381836280:web:e2e322905a943b128de40d"});var j=b.a.firestore(),f=[{name:"Hexagon",price:35,type:"shirt",variants:[{variant:"Outrun",imgLink:"https://firebasestorage.googleapis.com/v0/b/react-ecommerce-1e532.appspot.com/o/Hex.png?alt=media&token=4f0b1b4c-8b95-4a80-8e55-7156161f1db6"},{variant:"Forge",imgLink:"https://firebasestorage.googleapis.com/v0/b/react-ecommerce-1e532.appspot.com/o/Forge.png?alt=media&token=2d0d2526-c1db-4869-bbbf-6bf3cc6b758c"},{variant:"Arcanum",imgLink:"https://firebasestorage.googleapis.com/v0/b/react-ecommerce-1e532.appspot.com/o/Arcanum%20Forge.png?alt=media&token=d8ff802e-cce8-49c3-9b81-1dca09a6d97b"}]},{name:"Polygon",price:35,type:"shirt",variants:[{variant:"Silver",imgLink:"https://firebasestorage.googleapis.com/v0/b/react-ecommerce-1e532.appspot.com/o/Grey.png?alt=media&token=dbd860c1-c35e-44b8-b80e-7581bce4a145"},{variant:"Gold",imgLink:"https://firebasestorage.googleapis.com/v0/b/react-ecommerce-1e532.appspot.com/o/Gold.png?alt=media&token=e9a31563-c5d5-4e9e-91ed-8118d5185a14"},{variant:"Neon",imgLink:"https://firebasestorage.googleapis.com/v0/b/react-ecommerce-1e532.appspot.com/o/Neonscape.png?alt=media&token=9e432e6f-2186-40ea-bf13-b314b59c0ac8"}]},{name:"Glass",price:35,type:"shirt",variants:[{variant:"Red",imgLink:"https://firebasestorage.googleapis.com/v0/b/react-ecommerce-1e532.appspot.com/o/Orange.png?alt=media&token=b1da5f3f-7645-43f2-b9b4-c950ad3c75e8"},{variant:"Blue",imgLink:"https://firebasestorage.googleapis.com/v0/b/react-ecommerce-1e532.appspot.com/o/Blue.png?alt=media&token=2d8a6c1c-d9bb-4084-a968-a115762789b4"}]}],l=function(){var t=Object(u.a)(o.a.mark((function t(){var e,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=j.collection("products"),t.next=3,e.get();case 3:if(0===t.sent.size){t.next=6;break}return t.abrupt("return");case 6:n=f.map(function(){var t=Object(u.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.add(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Promise.all(n);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Object(u.a)(o.a.mark((function t(){var e,n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l();case 2:return e=j.collection("products"),t.next=5,e.get();case 5:return n=t.sent,r=n.docs,t.abrupt("return",r.map((function(t){return Object(p.a)({id:t.id},t.data())})));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=function(){var t=Object(u.a)(o.a.mark((function t(e){var n,r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=j.collection("products"),r=n.doc(e),t.next=4,r.get();case 4:if((a=t.sent).exists){t.next=7;break}return t.abrupt("return");case 7:return t.abrupt("return",Object(p.a)({id:a.id},a.data()));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=n(23),h=n.n(m),x=n(3),g=function(t){var e=t.onChange,n=t.product,a=t.variant,c=void 0===a?n.variants[0]:a,i=Object(r.useState)(),s=Object(d.a)(i,2),o=s[0],u=s[1];Object(r.useEffect)((function(){u(c)}),[]),Object(r.useEffect)((function(){e(o)}),[o]);return Object(x.jsx)("select",{onChange:function(t){u(t.target.value)},value:o,children:n.variants.map((function(t){return Object(x.jsx)("option",{value:t.variant,children:t.variant})}))})},k=function(t){var e=t.onChange,n=t.value,a=void 0===n?1:n,c=Object(r.useState)(a),i=Object(d.a)(c,2),s=i[0],o=i[1];Object(r.useEffect)((function(){e(s)}),[s]);var u=function(t){o(s<=0?0:s-1)},p=function(t){o(s+1)};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return e(u)},children:"-"}),s,Object(x.jsx)("button",{onClick:function(){return e(p)},children:"+"})]})},C=n(17),_=function(){var t=Object(u.a)(o.a.mark((function t(e,n){var r,a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=j.collection(e),a=r.doc(n),t.next=4,a.get();case 4:if((c=t.sent).exists){t.next=7;break}return t.abrupt("return");case 7:return t.abrupt("return",Object(p.a)({id:c.id},c.data()));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),w=function(){var t=Object(u.a)(o.a.mark((function t(e,n,r){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=j.collection(e).doc(n),t.next=3,a.update({products:r});case 3:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),y=function(t){var e=t.product,n=Object(r.useState)("eOlYq5Ls5F0dQz7aURLA"),a=Object(d.a)(n,2),c=a[0],i=(a[1],Object(r.useState)([])),s=Object(d.a)(i,2),p=s[0],b=s[1],j=Object(r.useState)(e.id),f=Object(d.a)(j,2),l=f[0],O=(f[1],Object(r.useState)(1)),v=Object(d.a)(O,2),m=v[0],y=v[1],S=Object(r.useState)(e.variants[0].variant),P=Object(d.a)(S,2),L=P[0],V=P[1],F=function(){var t=Object(u.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_("cart",c);case 2:e=t.sent,b(e.products);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){F()}),[]);return Object(x.jsxs)("div",{className:h.a.ProductCard,children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{children:Object(x.jsx)(C.b,{to:"/products/".concat(e.id),children:e.name})}),Object(x.jsxs)("p",{children:["Price: $",e.price]}),Object(x.jsx)("div",{className:h.a.Variants,children:e.variants.map((function(t){return Object(x.jsxs)("div",{className:h.a.Variant,children:[Object(x.jsx)("p",{children:t.variant}),Object(x.jsx)("img",{src:t.imgLink,alt:t.variant,height:"300"})]})}))})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)(g,{onChange:function(t){V(t)},product:e,variant:L},e.id),Object(x.jsx)(k,{onChange:function(t){y(t)},value:1}),Object(x.jsx)("button",{onClick:function(){var t={productId:l,quantity:m,variant:L},n=p.findIndex((function(t,n){return t.productId===e.id&&t.variant===L}));0===m||(-1===n?(p.push(t),w("cart",c,p)):n>=0&&(p[n].quantity+=m,w("cart",c,p)))},children:"Add to Cart"})]})]})},S=n(33),P=n.n(S),L=function(){var t=Object(r.useState)([]),e=Object(d.a)(t,2),n=e[0],a=e[1];return Object(r.useEffect)((function(){(function(){var t=Object(u.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O();case 2:e=t.sent,a(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(x.jsx)("div",{className:P.a.Home,children:n.map((function(t){return Object(x.jsx)(y,{product:t},t.id)}))})},V=n(11),F=n(34),I=n.n(F),N=function(){var t=Object(V.f)().id,e=Object(r.useState)(void 0),n=Object(d.a)(e,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){(function(){var e=Object(u.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:n=e.sent,c(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(x.jsxs)(x.Fragment,{children:[console.log(a),a?Object(x.jsx)("div",{className:I.a.Product,children:Object(x.jsx)(y,{product:a},a.id)}):Object(x.jsxs)("p",{children:["Product with id =",">"," ",t," does not exist"]})]})},A=function(){return Object(x.jsx)(C.b,{to:"/cart",children:"Go to Cart"})},E=n(35),q=n.n(E),z=n(24),G=n.n(z),B=function(t){var e=t.cartItem,n=t.imgLink,a=t.index,c=t.product,i=(t.onChange,Object(r.useState)("eOlYq5Ls5F0dQz7aURLA")),s=Object(d.a)(i,2),p=s[0],b=(s[1],Object(r.useState)(e)),j=Object(d.a)(b,2),f=j[0],l=(j[1],Object(r.useState)(e.quantity)),O=Object(d.a)(l,2),v=O[0],m=O[1],h=Object(r.useState)(e.variant),y=Object(d.a)(h,2),S=y[0],P=y[1],L=Object(r.useState)([]),V=Object(d.a)(L,2),F=V[0],I=V[1],N=function(){var t=Object(u.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_("cart",p);case 2:e=t.sent,I(e.products);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:G.a.CartCard,children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{children:Object(x.jsxs)(C.b,{to:"/products/".concat(c.id),children:[c.name," ",e.variant]})}),Object(x.jsxs)("p",{children:["Price: $",c.price]}),Object(x.jsx)("div",{className:G.a.Variants,children:Object(x.jsxs)("div",{className:G.a.Variant,children:[Object(x.jsx)("p",{children:e.variant}),Object(x.jsx)("p",{children:e.quantity}),Object(x.jsx)("img",{src:n,alt:"variant",height:"300"})]})})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)(g,{onChange:function(t){P(t)},product:c,variant:e.variant}),Object(x.jsx)(k,{onChange:function(t){m(t)},value:e.quantity}),Object(x.jsx)("button",{onClick:function(){f.variant=S,f.quantity=v,0===v?(N(),F.splice(a,1),w("cart",p,F)):(N(),F.splice(a,1,f),w("cart",p,a,S,v))},children:"Update Cart"})]})]})},H=function(){var t=Object(r.useState)([]),e=Object(d.a)(t,2),n=e[0],a=e[1],c=Object(r.useState)("eOlYq5Ls5F0dQz7aURLA"),i=Object(d.a)(c,2),s=i[0],p=(i[1],Object(r.useState)([])),b=Object(d.a)(p,2),j=b[0],f=b[1],l=function(){var t=Object(u.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_("cart",s);case 2:e=t.sent,f(e.products);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=function(){var t=Object(u.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O();case 2:e=t.sent,a(e),l();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){v()}),[]),Object(r.useEffect)((function(){console.log("cartArr changed")}),[j]);var m=function(){};return Object(x.jsx)("div",{className:q.a.Cart,children:j.map((function(t,e){var r,a=(r=t.productId,n.findIndex((function(t,e){return t.id===r}))),c=function(t,e){return n[t].variants.findIndex((function(t,n){return t.variant===e}))}(a,t.variant);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(B,{onChange:m,cartItem:t,imgLink:n[a].variants[c].imgLink,index:e,product:n[a]},t.productId)})}))})},Y=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(C.a,{children:[Object(x.jsx)(A,{}),Object(x.jsxs)(V.c,{children:[Object(x.jsx)(V.a,{exact:!0,path:"/",children:Object(x.jsx)(L,{})}),Object(x.jsx)(V.a,{path:"/products/:id",children:Object(x.jsx)(N,{})}),Object(x.jsx)(V.a,{path:"/cart",children:Object(x.jsx)(H,{})})]})]})})},Q=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,56)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),c(t),i(t)}))};i.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(Y,{})}),document.getElementById("root")),Q()}},[[55,1,2]]]);
//# sourceMappingURL=main.7cce5cce.chunk.js.map